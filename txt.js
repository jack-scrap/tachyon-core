class Char {
	constructor(c, x) {
		function asciiToAlphaNo(c) {
				let i = c.charCodeAt(0);

				if (i >= '0'.charCodeAt(0) && i <= '9'.charCodeAt(0)) {
					return i - 30;
				}

				if (i >= 'a'.charCodeAt(0) && i <= 'z'.charCodeAt(0)) {
						return i - 97 + 10;
				}
		}

		this.glyph = [
			[ // 0
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // 1
				// horizontal
				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // 2
				// left
				0.0, 0.0,
				0.0, 0.5,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.5,
				1.0, 1.0
			], [ /// 3
				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // 4
				// left
				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // 5
				// left
				1.0, 0.0,
				1.0, 0.5,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				0.0, 0.5,
				0.0, 1.0
			], [ // 6
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5
			], [ // 7
				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // 8
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // 9
				// left
				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // a
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // b
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // c
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 1.0,
				1.0, 1.0,
			], [ // d
				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 1.0,
				1.0, 1.0,
			], [ // e
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,
			], [ // f
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0
			], [ // g
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5
			], [ // h
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5
			], [ // i
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0
			], [ // j
				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0
			], [ // k
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // l
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				1.0, 0.0
			], [ // m
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// middle
				0.5, 0.0,
				0.5, 0.5,

				0.5, 0.5,
				0.5, 1.0,

				// horizontal
				0.0, 1.0,
				0.5, 1.0,

				0.5, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // n
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal (top)
				0.0, 1.0,
				0.5, 1.0,

				// center
				0.5, 1.0,
				0.5, 0.0,

				// horizontal (bottom)
				0.5, 0.0,
				1.0, 0.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,
			], [ // o
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// bottom
				0.0, 0.0,
				0.5, 0.0,

				0.5, 0.0,
				1.0, 0.0,

				// top
				0.0, 1.0,
				0.5, 1.0,

				0.5, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,
			], [ // p
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.5,
				1.0, 1.0
			], [ // q
				// left
				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,
			], [ // r
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,
				
				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,
			], [ // s
				// left
				0.0, 0.0,
				0.0, 0.5,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.5,
				1.0, 1.0
			], [ // t
				// left
				0.5, 0.0,
				0.5, 0.5,

				0.5, 0.5,
				0.5, 1.0,

				// top
				0.0, 1.0,
				0.5, 1.0,

				0.5, 1.0,
				1.0, 1.0
			], [ // u
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				0.5, 0.0,

				0.5, 0.0,
				1.0, 0.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,
			], [ // v
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.0,
				0.5, 0.0,

				// right
				0.5, 0.0,
				0.5, 0.5,

				0.5, 0.5,
				0.5, 1.0,
			], [ // w
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// middle
				0.5, 0.0,
				0.5, 0.5,

				0.5, 0.5,
				0.5, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,

				// bottom
				0.0, 0.0,
				0.5, 0.0,

				0.5, 0.0,
				1.0, 0.0
			], [ // x
				// left
				0.0, 0.0,
				0.0, 0.5,

				0.0, 0.5,
				0.0, 1.0,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5
			], [ // y
				// left
				0.0, 0.5,
				0.0, 1.0,

				// horizontal
				0.0, 0.5,
				1.0, 0.5,

				// right
				1.0, 0.0,
				1.0, 0.5,

				1.0, 0.5,
				1.0, 1.0
			], [ // z
				// left
				0.0, 0.0,
				0.0, 0.5,

				// horizontal
				0.0, 0.0,
				1.0, 0.0,

				0.0, 0.5,
				1.0, 0.5,

				0.0, 1.0,
				1.0, 1.0,

				// right
				1.0, 0.5,
				1.0, 1.0
			]
		];

		this.vao = gl.createVertexArray();
		gl.bindVertexArray(this.vao);

		// data
		this.vtc = this.glyph[asciiToAlphaNo(c)];

		this.vbo = gl.createBuffer();
		gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);
		gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vtc), gl.STATIC_DRAW);

		// program
		this.prog = new Prog('vec', 'green');

		// matrix
		this.model = new Float32Array(16);
		mat4.identity(this.model);

		this.id = new Float32Array(16);
		this.trans = new Float32Array(16);
		this.rot = new Float32Array(16);

		mat4.identity(this.id);

		// attribute
		this.attrPos = gl.getAttribLocation(this.prog.id, 'pos');
		gl.vertexAttribPointer(this.attrPos, 2, gl.FLOAT, gl.FALSE, 2 * Float32Array.BYTES_PER_ELEMENT, 0);
		gl.enableVertexAttribArray(this.attrPos);

		// uniform
		this.uniModel = gl.getUniformLocation(this.prog.id, 'model');

		this.x = x;
		this.y = 0;
		this.theta = 0;
	}

	draw() {
		gl.bindVertexArray(this.vao);
		gl.useProgram(this.prog.id);

		mat4.translate(this.trans, this.id, [this.x, this.y, 0]);
		mat4.rotate(this.rot, this.id, this.theta, [0, 0, 1]);
		mat4.mul(this.model, this.rot, this.id);
		mat4.mul(this.model, this.trans, this.model);
		gl.uniformMatrix4fv(this.uniModel, gl.FALSE, this.model);

		gl.drawArrays(gl.LINES, 0, this.vtc.length / 2);
	}
};

class Str {
	constructor(buff) {
		this.c = [];

		this.wd = (buff.length + (buff.length - 1)) / 10;

		for (let i = 0; i < buff.length; i++) {
			this.c.push(new Char(buff[i], -(this.wd / 4) + (i * (1 / 10))));
		}
	}

	draw() {
		for (let _ of this.c) {
			_.draw();
		}
	}
};
